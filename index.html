    </symbol>
    <symbol id="icon-column" viewBox="0 0 24 24">
      <path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"/>
    </symbol>
    <symbol id="-icon-analytics" viewBox="0 0 24 24">
      <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>
    </symbol>
    <symbol id="icon-export" viewBox="0 0 24 24">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 5 17 10"/><line x1="12" y1="15" x2="12" y2="5"/>
    </symbol>
    <symbol id="icon-settings" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H5.78a1.65 1.65 0 0 0-1.51 1 1.65 1.65 0 0 0 .33 1.82l.07.09A10 10 0 0 0 12 17.66a10 10 0 0 0 6.26-2.57z"/><path d="M19.4 9a1.65 1.65 0 0 1 .33 1.82 1.65 1.65 0 0 1-1.51 1H5.78a1.65 1.65 0 0 1-1.51-1 1.65 1.65 0 0 1 .33-1.82l.07-.09A10 10 0 0 1 12 6.34a10 10 0 0 1 6.26 2.57z"/>
    </symbol>
    <symbol id="icon-mail" viewBox="0 0 24 24">
      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/>
    </symbol>
    <symbol id="icon-phone" viewBox="0 0 24 24">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.362 1.903.7 2.81a2 2 0 0 1-.45 2.11L8 10a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.338 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
    </symbol>
    <symbol id="icon-star" viewBox="0 0 24 24">
      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
    </symbol>
    <symbol id="icon-present" viewBox="0 0 24 24">
      <path d="M20 6L9 17l-5-5"/>
    </symbol>
    <symbol id="icon-late" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
    </symbol>
    <symbol id="icon-absent" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
    </symbol>
  </svg>

  <!-- SPLASH -->
  <div id="splash">
    <div class="splash-logo-wrap">
      <div class="splash-ring"></div>
      <div class="splash-ring"></div>
      <div class="splash-ring"></div>
      <div class="splash-icon-core">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <use href="#icon-school"></use>
        </svg>
      </div>
    </div>
    <div class="splash-title">GradeJournal</div>
    <div class="splash-sub">Professional Teacher Gradebook</div>
    <div class="splash-bar">
      <div class="splash-progress"></div>
    </div>
  </div>

  <!-- LANDING - REDESIGNED WITH BENTO GRID -->
  <div id="s-landing" class="screen">
    <nav class="land-nav">
      <div class="land-logo">
        <div class="land-logo-mark">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <use href="#icon-school"></use>
          </svg>
        </div>
        GradeJournal
      </div>
      <div class="land-nav-btns">
        <button class="btn-ghost" onclick="showAuth('signin')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/>
          </svg>
          Log In
        </button>
        <button class="btn-primary" onclick="openDemoRequest()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><circle cx="12" cy="8" r="0.5" fill="currentColor"/>
          </svg>
          Request Demo
        </button>
        <button class="btn-ghost" onclick="showContact()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/>
          </svg>
          Contact
        </button>
      </div>
    </nav>
    
    <section class="land-hero">
      <div class="hero-badge">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        ‚ú¶ Built for professional educators
      </div>
      <h1>The <em>smarter</em> way to run your gradebook</h1>
      <p>Organize classrooms, track attendance, record grades ‚Äî with IELTS mode, bulk operations, and professional exports.</p>
      <div class="hero-cta">
        <button class="btn-primary btn-xl" onclick="showAuth('signin')">
          Log In
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
          </svg>
        </button>
        <button class="btn-ghost btn-xl" onclick="openDemoRequest()">Request Demo</button>
      </div>
    </section>

    <!-- BENTO GRID FEATURES -->
    <div class="bento-grid">
      <!-- Card 1: Gradebook (wide) -->
      <div class="bento-card wide">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="21" x2="9" y2="9"/>
          </svg>
        </div>
        <h3 class="card-title">Powerful Gradebook</h3>
        <p class="card-desc">Click any cell to enter grades. Bulk operations for speed. Export to PDF/Excel with custom branding.</p>
        <div class="mini-preview">
          <div class="preview-row">
            <span style="width:60px; font-weight:600;">Smith</span>
            <div class="preview-bar"><div class="preview-bar-fill" style="width:85%"></div></div>
            <span style="color:var(--success)">A-</span>
          </div>
          <div class="preview-row">
            <span style="width:60px; font-weight:600;">Jones</span>
            <div class="preview-bar"><div class="preview-bar-fill" style="width:72%"></div></div>
            <span style="color:var(--warning)">B+</span>
          </div>
          <div class="preview-row">
            <span style="width:60px; font-weight:600;">Lee</span>
            <div class="preview-bar"><div class="preview-bar-fill" style="width:94%"></div></div>
            <span style="color:var(--success)">A</span>
          </div>
        </div>
      </div>

      <!-- Card 2: IELTS Mode -->
      <div class="bento-card">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
          </svg>
        </div>
        <h3 class="card-title">IELTS Mode</h3>
        <p class="card-desc">Four-section scoring with auto-calculated Overall Band. Built for language teachers.</p>
        <div class="preview-grade-row">
          <div class="preview-grade filled">L:7.5</div>
          <div class="preview-grade filled">R:8.0</div>
          <div class="preview-grade filled">W:7.0</div>
          <div class="preview-grade filled">S:7.5</div>
          <div class="preview-grade" style="background:var(--ielts-blue);color:white;">√ò:7.5</div>
        </div>
      </div>

      <!-- Card 3: Student Profiles (tall) -->
      <div class="bento-card tall">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <use href="#icon-users"></use>
          </svg>
        </div>
        <h3 class="card-title">Student Profiles</h3>
        <p class="card-desc">Phone numbers, parent contacts, notes ‚Äî click any field to edit inline.</p>
        <div class="stats-row">
          <div class="stat-item">
            <div class="stat-value">128</div>
            <div class="stat-label">Students</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">94%</div>
            <div class="stat-label">Contact</div>
          </div>
        </div>
        <div style="margin-top:16px; background:rgba(255,255,255,0.4); border-radius:12px; padding:12px;">
          <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
            <div style="width:24px; height:24px; background:var(--accent); border-radius:6px; color:white; display:flex; align-items:center; justify-content:center; font-size:12px;">JD</div>
            <span style="font-weight:600;">Jenny Davis</span>
            <span style="margin-left:auto; font-size:11px; color:var(--text-light)">üì± +998 90 123 45 67</span>
          </div>
          <div style="display:flex; align-items:center; gap:8px;">
            <div style="width:24px; height:24px; background:var(--success); border-radius:6px; color:white; display:flex; align-items:center; justify-content:center; font-size:12px;">MA</div>
            <span style="font-weight:600;">Mark Adams</span>
            <span style="margin-left:auto; font-size:11px; color:var(--text-light)">üìß mark.a@school.com</span>
          </div>
        </div>
      </div>

      <!-- Card 4: Smart Attendance -->
      <div class="bento-card">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <use href="#icon-check"></use>
          </svg>
        </div>
        <h3 class="card-title">Smart Attendance</h3>
        <p class="card-desc">Present / Late / Absent with one-click cycling. Late counts as attended.</p>
        <div style="display:flex; gap:8px; margin-top:12px;">
          <span class="pill pill-green">‚úì Present 18</span>
          <span class="pill pill-amber">‚è∞ Late 3</span>
          <span class="pill pill-red">‚úó Absent 2</span>
        </div>
        <div style="margin-top:12px; font-size:12px; color:var(--text-light);">
          <span style="display:flex; align-items:center; gap:4px;"><span class="preview-dot"></span> 94% attendance rate</span>
        </div>
      </div>

      <!-- Card 5: Analytics Dashboard (wide) -->
      <div class="bento-card wide">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <use href="#icon-analytics"></use>
          </svg>
        </div>
        <h3 class="card-title">Analytics Dashboard</h3>
        <p class="card-desc">Per-student rates, history, and totals. Export full class reports.</p>
        <div style="display:flex; gap:20px; margin-top:12px;">
          <div style="flex:1;">
            <div style="height:60px; display:flex; align-items:flex-end; gap:4px;">
              <div style="width:20px; height:45px; background:var(--success); border-radius:4px 4px 0 0;"></div>
              <div style="width:20px; height:60px; background:var(--success); border-radius:4px 4px 0 0;"></div>
              <div style="width:20px; height:38px; background:var(--warning); border-radius:4px 4px 0 0;"></div>
              <div style="width:20px; height:52px; background:var(--success); border-radius:4px 4px 0 0;"></div>
              <div style="width:20px; height:30px; background:var(--error); border-radius:4px 4px 0 0;"></div>
            </div>
          </div>
          <div style="flex:1;">
            <div class="rate-bar-wrap"><div class="rate-bar"><div class="rate-bar-fill" style="width:94%"></div></div><span>94%</span></div>
            <div class="rate-bar-wrap"><div class="rate-bar"><div class="rate-bar-fill" style="width:88%"></div></div><span>88%</span></div>
            <div class="rate-bar-wrap"><div class="rate-bar"><div class="rate-bar-fill" style="width:76%"></div></div><span>76%</span></div>
          </div>
        </div>
      </div>

      <!-- Card 6: Works Offline (large) -->
      <div class="bento-card large">
        <div class="card-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path d="M18 11V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h6m4-2h6"/><circle cx="18" cy="18" r="3"/><path d="M21 15v4"/>
          </svg>
        </div>
        <h3 class="card-title">Works Offline</h3>
        <p class="card-desc">Data saved locally. No internet required after first load. Nothing is ever lost. Syncs when you're back online.</p>
        <div style="display:flex; gap:12px; margin-top:16px;">
          <div style="flex:1; background:rgba(255,255,255,0.15); border-radius:12px; padding:12px;">
            <div style="font-size:20px; font-weight:700;">üì∂</div>
            <div style="font-size:12px; margin-top:4px;">Auto-sync</div>
          </div>
          <div style="flex:1; background:rgba(255,255,255,0.15); border-radius:12px; padding:12px;">
            <div style="font-size:20px; font-weight:700;">üíæ</div>
            <div style="font-size:12px; margin-top:4px;">Local backup</div>
          </div>
          <div style="flex:1; background:rgba(255,255,255,0.15); border-radius:12px; padding:12px;">
            <div style="font-size:20px; font-weight:700;">üîÑ</div>
            <div style="font-size:12px; margin-top:4px;">Cloud merge</div>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA BAND -->
    <div class="land-cta-band">
      <h2>Ready to teach smarter?</h2>
      <p>Join educators who trust GradeJournal to keep their classrooms organized.</p>
      <button class="btn-primary btn-xl" onclick="openDemoRequest()" style="background:white;color:var(--accent-dark);box-shadow:none">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><circle cx="12" cy="8" r="0.5" fill="currentColor"/>
        </svg>
        Request Demo
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
        </svg>
      </button>
    </div>
    <footer class="land-footer">¬© 2026 GradeJournal ‚Äî Made for professional educators</footer>
  </div>

  <!-- AUTH - REDESIGNED WITH FEATURE LIST -->
  <div id="s-auth" class="screen">
    <div class="auth-page-wrap">
      <!-- Left panel: Feature list instead of fake stats -->
      <div class="auth-left-panel">
        <div class="auth-brand">
          <div class="auth-brand-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <use href="#icon-school"></use>
            </svg>
          </div>
          <div class="auth-brand-name">GradeJournal</div>
        </div>

        <!-- Feature list - professional and trustworthy -->
        <div class="auth-feature-list">
          <div class="auth-feature-item">
            <div class="auth-feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <use href="#icon-check"></use>
              </svg>
            </div>
            <div class="auth-feature-text">
              <div class="auth-feature-title">Track attendance across all lessons</div>
              <div class="auth-feature-desc">Present, late, absent ‚Äî one-click cycling</div>
            </div>
          </div>

          <div class="auth-feature-item">
            <div class="auth-feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
              </svg>
            </div>
            <div class="auth-feature-text">
              <div class="auth-feature-title">IELTS 4-section scoring</div>
              <div class="auth-feature-desc">Listening, Reading, Writing, Speaking with overall band</div>
            </div>
          </div>

          <div class="auth-feature-item">
            <div class="auth-feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
            </div>
            <div class="auth-feature-text">
              <div class="auth-feature-title">Export to PDF & Excel</div>
              <div class="auth-feature-desc">Professional reports with your school logo</div>
            </div>
          </div>

          <div class="auth-feature-item">
            <div class="auth-feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M18 11V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h6m4-2h6"/><circle cx="18" cy="18" r="3"/><path d="M21 15v4"/>
              </svg>
            </div>
            <div class="auth-feature-text">
              <div class="auth-feature-title">Works offline, syncs to cloud</div>
              <div class="auth-feature-desc">Never lose data ‚Äî automatic backup</div>
            </div>
          </div>
        </div>

        <!-- Testimonial instead of fake numbers -->
        <div class="auth-testimonial">
          <div class="auth-testimonial-quote">
            "GradeJournal has transformed how I track my students' progress. The IELTS mode is a game-changer."
          </div>
          <div class="auth-testimonial-author">
            <div class="auth-testimonial-avatar">JD</div>
            <div class="auth-testimonial-info">
              <div class="auth-testimonial-name">Jennifer Davis</div>
              <div class="auth-testimonial-role">ESL Teacher, 12+ years</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right panel: Form (unchanged but with SVG icons) -->
      <div class="auth-right-panel">
        <div class="auth-form-card">
          <div class="auth-form-header">
            <div class="auth-logo-mark">
              <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <use href="#icon-school"></use>
              </svg>
            </div>
            <h2>Welcome back</h2>
            <p id="auth-tagline">Log in to your GradeJournal account</p>
          </div>

          <div id="err-signin" class="auth-error"></div>

          <div class="form-group">
            <label>Email Address</label>
            <input type="email" class="form-input" id="si-email" placeholder="teacher@school.com" autocomplete="email">
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-input" id="si-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              onkeydown="if(event.key==='Enter')authSubmit('signin')" autocomplete="current-password">
          </div>

          <button class="auth-submit" id="tab-signin" onclick="authSubmit('signin')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" style="margin-right:6px;">
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/>
            </svg>
            Log In to GradeJournal ‚Üí
          </button>

          <div class="auth-back-link">
            <a onclick="showLanding()">‚Üê Back to homepage</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <div id="s-home" class="screen">
    <div class="topbar">
      <div class="topbar-logo">
        <div class="logo-mark">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <use href="#icon-school"></use>
          </svg>
        </div>
        GradeJournal
      </div>
      <div class="topbar-right">
        <div class="save-pill" id="save-pill-home">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="20 6 9 17 4 12" />
          </svg>
          Saved
        </div>
        <div class="user-pill" onclick="openOv('ov-user')">
          <div class="user-avatar" id="user-av">?</div>
          <div class="user-name" id="user-name-display">Guest</div>
        </div>
      </div>
    </div>
    <div class="screen-body">
      <div class="home-header">
        <div>
          <div class="home-greeting" id="home-greeting">Good morning</div>
          <div class="home-sub">Manage your classrooms and track student progress</div>
        </div>
        <button class="btn btn-primary" onclick="openOv('ov-new-class')">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" />
          </svg>
          New Classroom
        </button>
      </div>
      <div class="classrooms-grid" id="classrooms-grid"></div>
    </div>
  </div>

  <!-- CLASSROOM -->
  <div id="s-classroom" class="screen slide-right" style="z-index:3">
    <div class="topbar">
      <button class="back-btn" onclick="goHome()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M19 12H5M12 5l-7 7 7 7" />
        </svg>
        Classrooms
      </button>
      <span class="topbar-sep">/</span><span class="topbar-crumb active" id="class-crumb">Class</span>
      <div class="topbar-right">
        <div class="save-pill" id="save-pill-class">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="20 6 9 17 4 12" />
          </svg>
          Saved
        </div>
        <button class="btn btn-secondary btn-sm" onclick="exportClass()">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" y1="15" x2="12" y2="3" />
          </svg>
          Export
        </button>
      </div>
    </div>
    <div class="tabs-bar">
      <button class="tab-btn active" data-tab="students" onclick="switchTab('students',this)">Students <span class="tab-badge" id="tbadge-students">0</span></button>
      <button class="tab-btn" data-tab="lessons" onclick="switchTab('lessons',this)">Lessons <span class="tab-badge" id="tbadge-lessons">0</span></button>
      <button class="tab-btn" data-tab="analytics" onclick="switchTab('analytics',this)">Analytics</button>
    </div>
    <div style="flex:1;overflow:hidden;display:flex;flex-direction:column">
      <div id="tp-students" class="tab-panel active">
        <div class="panel-hdr">
          <div class="panel-hdr-title">Class Roster</div>
          <div class="panel-hdr-count" id="students-count">0</div>
          <div class="panel-hdr-right">
            <input class="panel-search" placeholder="üîç Search students‚Ä¶" oninput="filterStudents(this.value)" id="student-search-inp">
            <button class="btn btn-primary btn-sm" onclick="openAddStudent()">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Add Student
            </button>
          </div>
        </div>
        <div class="panel-scroll" id="students-list"></div>
      </div>
      <div id="tp-lessons" class="tab-panel">
        <div class="panel-hdr">
          <div class="panel-hdr-title">All Lessons</div>
          <div class="panel-hdr-count" id="lessons-count">0</div>
          <div class="panel-hdr-right">
            <input class="panel-search" placeholder="üîç Search lessons‚Ä¶" oninput="filterLessons(this.value)">
            <button class="btn btn-primary btn-sm" onclick="openAddLesson()">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              New Lesson
            </button>
          </div>
        </div>
        <div class="panel-scroll">
          <div class="lessons-list" id="lessons-list"></div>
        </div>
      </div>
      <div id="tp-analytics" class="tab-panel">
        <div class="panel-hdr">
          <div class="panel-hdr-title">Attendance Analytics</div>
          <div class="panel-hdr-right"><button class="btn btn-secondary btn-sm" onclick="renderAnalytics()">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 4v6h-6"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
            </svg>
            Refresh
          </button></div>
        </div>
        <div class="panel-scroll" id="analytics-scroll"></div>
      </div>
    </div>
  </div>

  <!-- GRADEBOOK -->
  <div id="s-lesson" class="screen slide-right" style="z-index:4">
    <div class="topbar">
      <button class="back-btn" onclick="goBackToClass()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M19 12H5M12 5l-7 7 7 7" />
        </svg>
        <span id="lesson-back-label">Class</span>
      </button>
      <span class="topbar-sep">/</span><span class="topbar-crumb active" id="lesson-crumb">Lesson</span>
      <div class="topbar-right">
        <div class="save-pill" id="save-pill-lesson">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="20 6 9 17 4 12" />
          </svg>
          Saved
        </div>
        <button class="btn btn-secondary btn-sm" onclick="openLessonNotes()" id="add-notes-btn">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-notes"></use>
          </svg>
          Notes
        </button>
        <button class="btn btn-secondary btn-sm" onclick="openAddColumn()" id="add-col-btn">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-column"></use>
          </svg>
          Column
        </button>
        <button class="btn btn-primary btn-sm" onclick="exportLesson()">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" y1="15" x2="12" y2="3" />
          </svg>
          Export
        </button>
      </div>
    </div>
    <div class="lesson-gb-header">
      <div class="lesson-gb-name" id="lgb-name"></div>
      <div class="lesson-gb-date" id="lgb-date"></div>
    </div>
    <div class="stats-strip" id="stats-strip"></div>
    <div class="gradebook-scroll">
      <table class="gb-table">
        <thead id="gb-head"></thead>
        <tbody id="gb-body"></tbody>
      </table>
    </div>
  </div>

  <!-- MODALS -->
  <div class="ov" id="ov-new-class">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="18" rx="2"/><line x1="8" y1="9" x2="16" y2="9"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="12" y2="17"/>
          </svg>
        </div>
        <div>
          <div class="modal-title">New Classroom</div>
          <div class="modal-sub">Set up your class details</div>
        </div>
      </div>
      <div class="fg"><label class="flabel">Classroom Name</label><input class="finput" id="inp-cname"
          placeholder="e.g. 10A Mathematics" onkeydown="ifEnter(event,createClassroom)"></div>
      <div class="frow">
        <div class="fg"><label class="flabel">Subject</label><input class="finput" id="inp-csub"
            placeholder="e.g. Math"></div>
        <div class="fg"><label class="flabel">Teacher Name</label><input class="finput" id="inp-cteacher"
            placeholder="Your name"></div>
      </div>
      <div class="modal-foot"><button class="btn btn-ghost-app" onclick="closeOv('ov-new-class')">Cancel</button><button
          class="btn btn-primary" onclick="createClassroom()">Create Classroom</button></div>
    </div>
  </div>

  <div class="ov" id="ov-student">
    <div class="modal modal-lg">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>
          </svg>
        </div>
        <div>
          <div class="modal-title" id="ov-stu-title">Add Student</div>
          <div class="modal-sub">Contact info stored separately from grades</div>
        </div>
      </div>
      <div class="fg"><label class="flabel">Full Name *</label><input class="finput" id="inp-sname"
          placeholder="e.g. Bekzod Aliyev"></div>
      <div class="frow">
        <div class="fg"><label class="flabel">Student Phone</label><input class="finput" id="inp-sphone"
            placeholder="998 90 000 00 00"></div>
        <div class="fg"><label class="flabel">Student Email</label><input class="finput" id="inp-semail"
            placeholder="student@email.com"></div>
      </div>
      <div class="frow">
        <div class="fg"><label class="flabel">Parent / Guardian</label><input class="finput" id="inp-pname"
            placeholder="Parent full name"></div>
        <div class="fg"><label class="flabel">Parent Phone</label><input class="finput" id="inp-pphone"
            placeholder="998 90 000 00 00"></div>
      </div>
      <div class="fg"><label class="flabel">Notes</label><input class="finput" id="inp-snote"
          placeholder="Optional notes..."></div>
      <div class="modal-foot"><button class="btn btn-ghost-app" onclick="closeOv('ov-student')">Cancel</button><button
          class="btn btn-primary" id="stu-save-btn" onclick="saveStudent()">Add Student</button></div>
    </div>
  </div>

  <div class="ov" id="ov-lesson">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
        </div>
        <div>
          <div class="modal-title">New Lesson</div>
          <div class="modal-sub">Choose lesson type and details</div>
        </div>
      </div>

      <div class="mode-toggle">
        <button type="button" class="mode-btn active" id="mode-standard" onclick="toggleLessonMode('standard')">
          <div class="mode-icon">üìö</div>
          <div class="mode-label">Standard</div>
          <div class="mode-desc">Regular lesson with custom columns</div>
        </button>
        <button type="button" class="mode-btn" id="mode-ielts" onclick="toggleLessonMode('ielts')">
          <div class="mode-icon">üéØ</div>
          <div class="mode-label">IELTS Mode</div>
          <div class="mode-desc">4 sections + Overall Band</div>
        </button>
      </div>

      <div class="fg"><label class="flabel">Lesson Title / Topic</label><input class="finput" id="inp-ltopic"
          placeholder="e.g. Mock Test #1"></div>
      <div class="frow">
        <div class="fg"><label class="flabel">Date</label><input class="finput" id="inp-ldate" type="date"></div>
        <div class="fg"><label class="flabel">Lesson ‚Ññ</label><input class="finput" id="inp-lnum" type="number" min="1"
            placeholder="auto"></div>
      </div>

      <div class="modal-foot"><button class="btn btn-ghost-app" onclick="closeOv('ov-lesson')">Cancel</button><button
          class="btn btn-primary" onclick="saveLesson()">Create Lesson</button></div>
    </div>
  </div>

  <div class="ov" id="ov-column">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-column"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Add Grade Column</div>
        </div>
      </div>
      <div class="fg"><label class="flabel">Column Name</label><input class="finput" id="inp-colname"
          placeholder="e.g. Quiz 1, Midterm, Oral..." onkeydown="ifEnter(event,saveColumn)"></div>
      <div class="modal-foot"><button class="btn btn-ghost-app" onclick="closeOv('ov-column')">Cancel</button><button
          class="btn btn-primary" onclick="saveColumn()">Add Column</button></div>
      <!-- Template Selector -->
      <div class="template-selector" id="template-selector">
        <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text-light);margin-bottom:8px">Or Apply a Template</div>
      </div>
    </div>
  </div>

  <!-- LESSON NOTES MODAL -->
  <div class="ov" id="ov-lesson-notes">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-notes"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Lesson Notes</div>
          <div class="modal-sub">Private notes visible in lesson list</div>
        </div>
      </div>
      <div class="fg">
        <textarea class="finput" id="lesson-notes-area" rows="5" placeholder="e.g. Students struggled with Chapter 4. Schedule review next lesson..."></textarea>
      </div>
      <div class="modal-foot">
        <button class="btn btn-ghost-app" onclick="closeOv('ov-lesson-notes')">Cancel</button>
        <button class="btn btn-primary" onclick="saveLessonNotes()">Save Notes</button>
      </div>
    </div>
  </div>

  <div class="ov" id="ov-rename-col">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-edit"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Rename Column</div>
        </div>
      </div>
      <div class="fg"><label class="flabel">New Name</label><input class="finput" id="inp-rename-col"
          onkeydown="ifEnter(event,confirmRenameCol)"></div>
      <div class="modal-foot"><button class="btn btn-ghost-app"
          onclick="closeOv('ov-rename-col')">Cancel</button><button class="btn btn-primary"
          onclick="confirmRenameCol()">Rename</button></div>
    </div>
  </div>

  <div class="ov" id="ov-edit-lesson">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-edit"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Edit Lesson</div>
        </div>
      </div>
      <div class="fg"><label class="flabel">Lesson Title</label><input class="finput" id="inp-el-topic"></div>
      <div class="frow">
        <div class="fg"><label class="flabel">Date</label><input class="finput" id="inp-el-date" type="date"></div>
        <div class="fg"><label class="flabel">Lesson ‚Ññ</label><input class="finput" id="inp-el-num" type="number"
            min="1"></div>
      </div>
      <div class="modal-foot"><button class="btn btn-ghost-app"
          onclick="closeOv('ov-edit-lesson')">Cancel</button><button class="btn btn-primary"
          onclick="confirmEditLesson()">Save</button></div>
    </div>
  </div>

  <div class="ov" id="ov-confirm">
    <div class="modal confirm-modal">
      <div class="modal-hdr">
        <div class="modal-icon" style="background:var(--error-bg)">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><circle cx="12" cy="16" r="0.5" fill="currentColor"/>
          </svg>
        </div>
        <div>
          <div class="modal-title" id="confirm-title">Confirm</div>
        </div>
      </div>
      <div class="confirm-desc" id="confirm-desc"></div>
      <div class="modal-foot"><button class="btn btn-ghost-app" onclick="closeOv('ov-confirm')">Cancel</button><button
          class="btn btn-danger" onclick="confirmOk()">Delete</button></div>
    </div>
  </div>

  <div class="ov" id="ov-user">
    <div class="modal" style="max-width:340px">
      <div class="modal-hdr">
        <div class="um-avatar" id="um-avatar-lg">T</div>
        <div style="flex:1">
          <div class="modal-title" id="um-name">Teacher</div>
          <div class="modal-sub" id="um-email">Cloud mode</div>
        </div>
        <button class="icon-btn" onclick="closeOv('ov-user')" style="width:30px;height:30px;font-size:18px;flex-shrink:0">√ó</button>
      </div>
      
      <!-- Quick Profile Edit -->
      <div class="um-section">
        <div class="um-section-title">Profile</div>
        <div class="fg"><label class="flabel">Display Name</label><input class="finput" id="um-edit-name" placeholder="Your name"></div>
        <div class="fg"><label class="flabel">School / Institution</label><input class="finput" id="um-edit-school" placeholder="School name"></div>
        <div class="fg"><label class="flabel">Role</label>
          <select class="fselect" id="um-edit-role">
            <option value="teacher">Teacher</option>
            <option value="professor">Professor</option>
            <option value="tutor">Tutor</option>
            <option value="admin">Administrator</option>
            <option value="other">Other</option>
          </select>
        </div>
        <button class="btn btn-primary" style="width:100%;justify-content:center;margin-top:4px" onclick="saveProfileFromMenu()">Save Profile</button>
      </div>
      
      <!-- Settings Links -->
      <div class="um-section">
        <div class="um-section-title">App Settings</div>
        <button class="um-link-btn" onclick="closeOv('ov-user');openExportSettings()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H5.78a1.65 1.65 0 0 0-1.51 1 1.65 1.65 0 0 0 .33 1.82l.07.09A10 10 0 0 0 12 17.66a10 10 0 0 0 6.26-2.57z"/><path d="M19.4 9a1.65 1.65 0 0 1 .33 1.82 1.65 1.65 0 0 1-1.51 1H5.78a1.65 1.65 0 0 1-1.51-1 1.65 1.65 0 0 1 .33-1.82l.07-.09A10 10 0 0 1 12 6.34a10 10 0 0 1 6.26 2.57z"/>
          </svg>
          Customize PDF & Export
        </button>
        <button class="um-link-btn" onclick="backupData()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Backup Data (JSON)
        </button>
        <button class="um-link-btn" onclick="restoreFromFile()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 5 17 10"/><line x1="12" y1="5" x2="12" y2="15"/>
          </svg>
          Restore from Backup
        </button>
      </div>
      
      <button class="btn btn-danger" style="width:100%;justify-content:center;margin-top:8px" onclick="signOut()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        Sign Out
      </button>
    </div>
  </div>
  
  <!-- SETTINGS MODAL CSS -->
  <style>
    .um-avatar {
      width: 48px; height: 48px;
      background: linear-gradient(135deg, var(--accent), var(--warm-brown));
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      color: white; font-size: 18px; font-weight: 700;
      flex-shrink: 0;
    }
    .um-section {
      background: var(--cream-2);
      border-radius: 12px;
      padding: 14px;
      margin: 12px 0 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .um-section-title {
      font-size: 10px; font-weight: 700;
      text-transform: uppercase; letter-spacing: .6px;
      color: var(--text-light); margin-bottom: 2px;
    }
    .um-link-btn {
      display: flex; align-items: center; gap: 10px;
      background: white; border: 1px solid var(--border-light);
      border-radius: 9px; padding: 10px 14px;
      font-family: 'DM Sans', sans-serif; font-size: 13px;
      font-weight: 500; color: var(--text-dark);
      cursor: pointer; transition: all .15s; text-align: left; width: 100%;
    }
    .um-link-btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }
  </style>

  <!-- EXPORT MODAL -->
  <div class="ov" id="ov-export">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-export"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Export Options</div>
          <div class="modal-sub">Choose your format</div>
        </div>
      </div>
      <div style="display:flex;flex-direction:column;gap:12px">
        <button class="export-btn" onclick="exportPDF()">
          <div class="export-btn-icon">üìÑ</div>
          <div class="export-btn-text">
            <div class="export-btn-title">Export as PDF</div>
            <div class="export-btn-desc">Professional document with custom branding</div>
          </div>
        </button>
        <button class="export-btn" onclick="exportExcel()">
          <div class="export-btn-icon">üìä</div>
          <div class="export-btn-text">
            <div class="export-btn-title">Export as Excel</div>
            <div class="export-btn-desc">Spreadsheet for further analysis</div>
          </div>
        </button>
      </div>
      <button class="export-settings-link" onclick="openExportSettings()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H5.78a1.65 1.65 0 0 0-1.51 1 1.65 1.65 0 0 0 .33 1.82l.07.09A10 10 0 0 0 12 17.66a10 10 0 0 0 6.26-2.57z"/><path d="M19.4 9a1.65 1.65 0 0 1 .33 1.82 1.65 1.65 0 0 1-1.51 1H5.78a1.65 1.65 0 0 1-1.51-1 1.65 1.65 0 0 1 .33-1.82l.07-.09A10 10 0 0 1 12 6.34a10 10 0 0 1 6.26 2.57z"/>
        </svg>
        Customize PDF Appearance
      </button>
      <div class="modal-foot">
        <button class="btn btn-ghost-app" onclick="closeOv('ov-export')">Cancel</button>
      </div>
    </div>
  </div>

  <!-- EXPORT SETTINGS MODAL -->
  <div class="ov" id="ov-export-settings">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-settings"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Export Settings</div>
          <div class="modal-sub">Customize your PDF exports</div>
        </div>
      </div>

      <div class="fg">
        <label class="flabel">Company Logo</label>
        <div class="file-upload-zone" id="file-upload-zone">
          <input type="file" id="export-logo-file" class="file-upload-input" accept="image/png,image/jpeg,image/jpg"
            onchange="onExportLogoFileChange(event)">
          <label for="export-logo-file" class="file-upload-label">
            <span class="file-upload-icon">üì§</span>
            <span>Click or drag & drop PNG/JPEG</span>
          </label>
          <div class="file-preview-zone" id="file-preview-zone">
            <img id="export-logo-preview" class="file-preview-img" src="" alt="Logo preview">
            <div class="file-preview-info">
              <div class="file-preview-name" id="file-preview-name"></div>
              <div class="file-preview-size" id="file-preview-size"></div>
            </div>
            <button class="file-preview-remove" onclick="removeExportLogo()">Remove</button>
          </div>
        </div>
      </div>

      <div class="fg">
        <label class="flabel">PDF Accent Color</label>
        <div class="color-picker-container">
          <div class="color-preview-bar" onclick="toggleColorPicker()">
            <div class="color-swatch" id="color-swatch"></div>
            <div class="color-info">
              <div class="color-label">Current Color</div>
              <div class="color-value" id="color-value">hsl(30, 60%, 50%)</div>
            </div>
          </div>
          <div class="color-picker-dropdown" id="color-picker-dropdown">
            <div class="color-gradient-bar" id="color-gradient-bar">
              <div class="color-gradient-cursor" id="color-cursor"></div>
            </div>
            <div class="color-sliders">
              <div class="color-slider-row">
                <span class="color-slider-label">Hue</span>
                <input type="range" class="color-slider hue-slider" id="hue-slider" min="0" max="360" value="30">
                <span class="color-slider-value" id="hue-value">30¬∞</span>
              </div>
              <div class="color-slider-row">
                <span class="color-slider-label">Saturation</span>
                <input type="range" class="color-slider" id="sat-slider" min="0" max="100" value="60">
                <span class="color-slider-value" id="sat-value">60%</span>
              </div>
              <div class="color-slider-row">
                <span class="color-slider-label">Lightness</span>
                <input type="range" class="color-slider" id="light-slider" min="0" max="100" value="50">
                <span class="color-slider-value" id="light-value">50%</span>
              </div>
              <div class="color-slider-row">
                <span class="color-slider-label">Opacity</span>
                <input type="range" class="color-slider opacity-slider" id="opacity-slider" min="0" max="100"
                  value="100">
                <span class="color-slider-value" id="opacity-value">100%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-foot">
        <button class="btn btn-ghost-app" onclick="closeOv('ov-export-settings')">Cancel</button>
        <button class="btn btn-primary" onclick="saveExportSettings()">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- DEMO REQUEST MODAL -->
  <div class="ov" id="ov-demo">
    <div class="modal">
      <div class="modal-hdr">
        <div class="modal-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <use href="#icon-mail"></use>
          </svg>
        </div>
        <div>
          <div class="modal-title">Request a Demo</div>
          <div class="modal-sub">We'll get back to you within 24 hours</div>
        </div>
      </div>
      
      <div class="demo-contact-info" style="background: var(--cream-2); padding: 20px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
        <div style="font-size: 16px; font-weight: 600; color: var(--text-dark); margin-bottom: 8px;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline; margin-right:4px;">
            <use href="#icon-mail"></use>
          </svg>
          Send us an email
        </div>
        <div style="font-size: 18px; font-weight: 700; color: var(--accent); margin-bottom: 4px;">
          <a href="mailto:eshmurodov.moon1508@gmail.com" style="color:var(--accent);text-decoration:none">eshmurodov.moon1508@gmail.com</a>
        </div>
        <div style="font-size: 13px; color: var(--text-light);">Please include your name, school, and a brief message</div>
      </div>
      
      <div style="background: white; border: 1px solid var(--border-light); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
        <p style="font-size: 13px; color: var(--text-mid); margin-bottom: 12px;"><strong>What to include in your email:</strong></p>
        <ul style="font-size: 13px; color: var(--text-light); padding-left: 20px;">
          <li>Your full name and role</li>
          <li>School/Institution name</li>
          <li>Number of teachers/students</li>
          <li>Any specific questions</li>
        </ul>
      </div>
      
      <div style="text-align: center; margin-bottom: 16px;">
        <a href="https://mail.google.com/mail/?view=cm&fs=1&to=eshmurodov.moon1508@gmail.com&su=GradeJournal%20Demo%20Request&body=Hello%2C%0A%0AI'd%20like%20to%20request%20a%20demo%20of%20GradeJournal.%0A%0AName%3A%0ASchool%3A%0ARole%3A%0ANumber%20of%20students%3A%0A%0AAdditional%20questions%3A" 
           target="_blank"
           class="btn btn-primary" 
           style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; text-decoration: none;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 9h6v6H9z"/><path d="M21 15h-6v6"/>
          </svg>
          Open in Gmail
        </a>
      </div>
      
      <div style="font-size: 12px; color: var(--text-light); text-align: center; padding: 8px; background: var(--cream-2); border-radius: 8px;">
        <span>‚è±Ô∏è We typically respond within 24 hours on business days</span>
      </div>
      
      <div class="modal-foot">
        <button class="btn btn-ghost-app" onclick="closeOv('ov-demo')">Close</button>
      </div>
    </div>
  </div>

  <!-- ONBOARDING MODAL -->
  <div class="ov" id="ov-onboarding">
    <div class="modal" style="max-width: 500px;">
      <div class="modal-hdr">
        <div class="modal-icon" style="background: var(--accent-light);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/>
          </svg>
        </div>
        <div>
          <div class="modal-title">Welcome to GradeJournal! üëã</div>
          <div class="modal-sub">Let's personalize your experience</div>
        </div>
      </div>
      
      <div class="fg">
        <label class="flabel">Your Full Name</label>
        <input class="finput" id="onboarding-name" placeholder="e.g. John Smith">
      </div>
      
      <div class="fg">
        <label class="flabel">School/Institution Name</label>
        <input class="finput" id="onboarding-school" placeholder="e.g. Lincoln High School">
      </div>
      
      <div class="fg">
        <label class="flabel">Your Role</label>
        <select class="fselect" id="onboarding-role">
          <option value="teacher">Teacher</option>
          <option value="professor">Professor</option>
          <option value="tutor">Tutor</option>
          <option value="admin">Administrator</option>
          <option value="other">Other</option>
        </select>
      </div>
      
      <div style="background: var(--cream-2); padding: 16px; border-radius: 12px; margin: 16px 0;">
        <p style="font-size: 13px; color: var(--text-mid); display: flex; align-items: center; gap: 8px;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><line x1="12" y1="12" x2="12" y2="16"/><line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
          This information will be used in your exports and profile. You can change it later.
        </p>
      </div>
      
      <div class="modal-foot">
        <button class="btn btn-primary" style="width: 100%;" onclick="saveOnboarding()">Get Started ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- CONTACT PAGE - FIXED PADDING -->
  <div id="s-contact" class="screen">
    <div class="topbar">
      <button class="back-btn" onclick="showLanding()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M19 12H5M12 5l-7 7 7 7" />
        </svg>
        Back
      </button>
      <div class="topbar-logo">
        <div class="logo-mark">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <use href="#icon-school"></use>
          </svg>
        </div>
        GradeJournal
      </div>
    </div>
    
    <div class="screen-body" style="display: flex; align-items: center; justify-content: center; padding-top: calc(var(--nav-h) + 20px);">
      <div style="max-width: 600px; width: 100%; padding: 20px;">
        <div style="text-align: center; margin-bottom: 40px;">
          <div style="font-size: 48px; color: var(--accent); margin-bottom: 16px;">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <use href="#icon-mail"></use>
            </svg>
          </div>
          <h1 style="font-family: 'Playfair Display', serif; font-size: 32px; margin-bottom: 8px;">Get in Touch</h1>
          <p style="color: var(--text-light);">We're here to help with any questions</p>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 24px;">
          <!-- Email Card -->
          <div style="background: white; border-radius: 20px; padding: 32px; border: 1px solid var(--border-light); box-shadow: var(--shadow); text-align: center;">
            <div style="width: 64px; height: 64px; background: var(--accent-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.8">
                <use href="#icon-mail"></use>
              </svg>
            </div>
            <h2 style="font-size: 20px; margin-bottom: 8px;">Email Us</h2>
            <p style="color: var(--text-light); margin-bottom: 20px;">We typically respond within 24 hours</p>
            <a href="https://mail.google.com/mail/?view=cm&fs=1&to=eshmurodov.moon1508@gmail.com&su=GradeJournal%20Inquiry" 
               target="_blank" 
               class="btn btn-primary" 
               style="display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; font-size: 16px; text-decoration: none;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 9h6v6H9z"/><path d="M21 15h-6v6"/>
              </svg>
              Open in Gmail
            </a>
            <p style="margin-top: 16px; font-size: 13px; color: var(--text-light);">
              <a href="mailto:eshmurodov.moon1508@gmail.com" style="color:var(--accent);text-decoration:none;font-weight:600">eshmurodov.moon1508@gmail.com</a>
            </p>
          </div>
          
          <!-- Phone Card -->
          <div style="background: white; border-radius: 20px; padding: 32px; border: 1px solid var(--border-light); box-shadow: var(--shadow); text-align: center;">
            <div style="width: 64px; height: 64px; background: var(--cream-2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--text-light)" stroke-width="1.8">
                <use href="#icon-phone"></use>
              </svg>
            </div>
            <h2 style="font-size: 20px; margin-bottom: 8px;">Call Us</h2>
            <p style="color: var(--text-light); margin-bottom: 20px;">Available Mon-Fri, 9am-6pm</p>
            <div style="font-size: 18px; font-weight: 600; color: var(--text-dark); padding: 14px 28px; background: var(--cream-2); border-radius: 99px; display: inline-block;">
              998 91 404 54 69
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="sheet-ov" id="sheet-ov" onclick="closeSheetIfBg(event)">
    <div class="sheet" id="sheet-content"></div>
  </div>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
  <script type="module" src="supabase-client.js"></script>
  <script src="app.js"></script>
</body>
</html>
